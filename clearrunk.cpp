/*==============================================================================

	頂点管理 [clearrunk.cpp]
	Author :20106_田中蓮
	Date   :23_09_21
--------------------------------------------------------------------------------

==============================================================================*/
#include "clearrunk.h"
#include "sprite.h"
#include "texture.h"

#include "second.h"

//*****************************************************************************
// マクロ定義
//*****************************************************************************
#define TEX_WIDTH	(235)	//テクスチャの横幅
#define TEX_HEIGHT	(250)	//テクスチャの縦幅

//*****************************************************************************
// プロトタイプ宣言
//*****************************************************************************


//*****************************************************************************
// グローバル変数
//*****************************************************************************
static int g_TexNo;
static float g_U;		//U値の横幅
static float g_V;		//V値の高さ

static unsigned int g_ClearTime = 0;
//=============================================================================
// 初期化処理
//=============================================================================
void InitClearrunk(void)
{
	//テクスチャの読み込み
	g_TexNo = LoadTexture((char*)"data/TEXTURE/clearrunk.png");

	g_U = 0.0f;
	g_V = 0.0f;

	g_ClearTime = GetClearTime();
}

//=============================================================================
// 終了処理
//=============================================================================
void UninitClearrunk(void)
{
}

//=============================================================================
// 更新処理
//=============================================================================
void UpdateClearrunk(void)
{
	if (g_ClearTime < 50) {
		g_U = (1.0f / 3) * 0;
	}
	else if (g_ClearTime < 80) {
		g_U = (1.0f / 3) * 1;
	}
	else {
		g_U = (1.0f / 3) * 2;
	}
}

//=============================================================================
// 描画処理
//=============================================================================
void DrawClearrunk(void)
{
	//線をなくす
	SetSamplerState(FILTER_MODE_POINT, ADDRESS_MODE_WRAP);
	//背景の描画
	DrawSprite(g_TexNo,
		1180.0f, 750.0f,
		TEX_WIDTH, TEX_HEIGHT,
		g_U, g_V,
		(1.0f / 3), 1.0f);
}